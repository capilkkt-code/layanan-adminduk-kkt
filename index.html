<!doctype html>
<html lang="id">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Layanan Administrasi Kependudukan</title>
  <script src="/_sdk/data_sdk.js"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
        body {
            box-sizing: border-box;
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 50%, #f1f5f9 100%);
            min-height: 100%;
            line-height: 1.6;
        }
        
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        
        * {
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes slideIn {
            from { transform: translateX(-100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }
        
        .fade-in {
            animation: fadeIn 0.8s ease-out;
        }
        
        .slide-in {
            animation: slideIn 0.6s ease-out;
        }
        
        .float-animation {
            animation: float 3s ease-in-out infinite;
        }
        
        .service-card {
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
        }
        
        .service-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            transition: left 0.5s;
        }
        
        .service-card:hover::before {
            left: 100%;
        }
        
        .service-card:hover {
            transform: translateY(-12px) scale(1.02);
            box-shadow: 0 25px 50px rgba(0,0,0,0.2);
        }
        
        .service-card:active {
            transform: translateY(-8px) scale(0.98);
        }
        
        .modal-backdrop {
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(8px);
        }
        
        .signature-pad {
            border: 3px dashed #e2e8f0;
            cursor: crosshair;
            transition: border-color 0.3s ease;
        }
        
        .signature-pad:hover {
            border-color: #7c3aed;
        }
        
        .captcha-box {
            font-family: 'Courier New', monospace;
            letter-spacing: 8px;
            user-select: none;
            background: linear-gradient(45deg, #f8fafc, #e2e8f0);
            border: 2px solid #cbd5e0;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #1e40af 0%, #3b82f6 50%, #1e40af 100%);
            background-size: 200% 200%;
            animation: gradientShift 8s ease infinite;
            position: relative;
        }
        
        .gradient-bg::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="white" opacity="0.08"/><circle cx="75" cy="75" r="1" fill="white" opacity="0.08"/><circle cx="50" cy="10" r="0.5" fill="white" opacity="0.08"/><circle cx="10" cy="60" r="0.5" fill="white" opacity="0.08"/><circle cx="90" cy="40" r="0.5" fill="white" opacity="0.08"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
            pointer-events: none;
        }
        
        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.08);
        }
        
        .glass-effect-dark {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.25);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            box-shadow: 0 6px 20px rgba(59, 130, 246, 0.3);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .btn-primary::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.25), transparent);
            transition: left 0.5s;
        }
        
        .btn-primary:hover::before {
            left: 100%;
        }
        
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 30px rgba(59, 130, 246, 0.4);
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, #6366f1 0%, #4f46e5 100%);
            transition: all 0.3s ease;
        }
        
        .btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(99, 102, 241, 0.35);
        }
        
        .form-input {
            transition: all 0.3s ease;
            border: 2px solid #e2e8f0;
        }
        
        .form-input:focus {
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
            transform: translateY(-1px);
        }
        
        .hero-pattern {
            background-image: 
                radial-gradient(circle at 25% 25%, rgba(255,255,255,0.2) 0%, transparent 50%),
                radial-gradient(circle at 75% 75%, rgba(255,255,255,0.1) 0%, transparent 50%);
        }
        
        .section-divider {
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(102, 126, 234, 0.3), transparent);
            margin: 4rem 0;
        }
        
        .icon-bounce {
            animation: bounce 2s infinite;
        }
        
        @keyframes bounce {
            0%, 20%, 53%, 80%, 100% { transform: translate3d(0,0,0); }
            40%, 43% { transform: translate3d(0,-15px,0); }
            70% { transform: translate3d(0,-7px,0); }
            90% { transform: translate3d(0,-2px,0); }
        }
        
        .text-gradient {
            background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .loading-shimmer {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: shimmer 2s infinite;
        }
        
        .card-hover-effect {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .card-hover-effect:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        
        .stats-counter {
            font-variant-numeric: tabular-nums;
        }
        
        .custom-scrollbar::-webkit-scrollbar {
            width: 8px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 4px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 4px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #5a67d8, #6b46c1);
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
 </head>
 <body class="min-h-full"><!-- Hero Section -->
  <section class="relative bg-white shadow-lg">
   <div class="container mx-auto px-6 py-16">
    <div class="text-center fade-in"><img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgYG3MtHMiVSXp5KybdGJTRTql7WOwjsqjwxAIAjtO60S1N-d9zlxm4wm49Al5HZ_3zvIJ_6w5IapoyoVj9aGnpgg3N_caXvYs4jQRFPhYYzNRUoQ6_lDuFFAZd6slXOAE5L521WZfDzqyYJgcRFJaSe5cret0vkLsu55pywRJXar8DpDcmDPKOalNUrR17/w563-h282/Header%20Dukcapil.png" alt="Header Dukcapil" class="w-full max-w-5xl h-auto mx-auto drop-shadow-xl mb-12" onerror="this.src=''; this.alt='Header tidak dapat dimuat'; this.style.display='none';"> <!-- Stats Section -->
     <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mt-16 max-w-5xl mx-auto">
      <div class="glass-effect rounded-3xl p-8 card-hover-effect">
       <div class="text-4xl font-bold stats-counter text-blue-600 mb-2">
        9
       </div>
       <div class="text-base text-gray-700 font-medium">
        Jenis Layanan
       </div>
      </div>
      <div class="glass-effect rounded-3xl p-8 card-hover-effect">
       <div class="text-4xl font-bold stats-counter text-blue-600 mb-2" id="processed-count">
        0
       </div>
       <div class="text-base text-gray-700 font-medium">
        Pengajuan Diproses
       </div>
      </div>
      <div class="glass-effect rounded-3xl p-8 card-hover-effect">
       <div class="text-4xl font-bold stats-counter text-blue-600 mb-2">
        100%
       </div>
       <div class="text-base text-gray-700 font-medium">
        Digital &amp; Paperless
       </div>
      </div>
     </div><!-- Quick Info -->
     <div class="mt-12 flex flex-wrap justify-center gap-6">
      <div class="glass-effect px-8 py-4 rounded-full"><span class="text-base font-semibold text-gray-700">üïí 24/7 Online</span>
      </div>
      <div class="glass-effect px-8 py-4 rounded-full"><span class="text-base font-semibold text-gray-700">‚ö° Proses Cepat</span>
      </div>
      <div class="glass-effect px-8 py-4 rounded-full"><span class="text-base font-semibold text-gray-700">üîí Aman &amp; Terpercaya</span>
      </div>
     </div>
    </div>
   </div>
  </section><!-- Main Content -->
  <main class="container mx-auto px-6 py-20"><!-- Services Section -->
   <section id="services-section" class="mb-32 fade-in">
    <div class="text-center mb-20">
     <h2 class="text-5xl md:text-6xl font-bold text-gradient mb-6">Pilih Jenis Layanan</h2>
     <p class="text-xl text-gray-600 max-w-4xl mx-auto leading-relaxed">Akses mudah dan cepat untuk semua kebutuhan administrasi kependudukan Anda</p>
     <div class="section-divider"></div>
    </div>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10 max-w-7xl mx-auto"><!-- Service Cards will be generated here -->
    </div><!-- Additional Info -->
    <div class="mt-20 text-center">
     <div class="glass-effect rounded-3xl p-12 max-w-6xl mx-auto">
      <h3 class="text-3xl font-bold text-gray-800 mb-8">Mengapa Memilih Layanan Digital Kami?</h3>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-12 mt-12">
       <div class="text-center">
        <div class="text-6xl mb-6">
         ‚ö°
        </div>
        <h4 class="text-xl font-semibold text-gray-800 mb-4">Proses Cepat</h4>
        <p class="text-gray-600 text-base leading-relaxed">Pengajuan diproses dalam hitungan menit</p>
       </div>
       <div class="text-center">
        <div class="text-6xl mb-6">
         üîí
        </div>
        <h4 class="text-xl font-semibold text-gray-800 mb-4">Aman &amp; Terpercaya</h4>
        <p class="text-gray-600 text-base leading-relaxed">Data Anda dilindungi dengan enkripsi tingkat tinggi</p>
       </div>
       <div class="text-center">
        <div class="text-6xl mb-6">
         üì±
        </div>
        <h4 class="text-xl font-semibold text-gray-800 mb-4">Akses 24/7</h4>
        <p class="text-gray-600 text-base leading-relaxed">Layanan tersedia kapan saja, dimana saja</p>
       </div>
      </div>
     </div>
    </div>
   </section><!-- Form Section -->
   <section id="form-section" class="hidden mb-32 slide-in">
    <div class="glass-effect rounded-3xl shadow-2xl p-12 md:p-16 max-w-6xl mx-auto">
     <div class="flex flex-col md:flex-row items-start md:items-center justify-between mb-12">
      <div>
       <h2 class="text-4xl md:text-5xl font-bold text-gradient mb-4">Formulir Pengajuan</h2>
       <p class="text-gray-600 text-lg">Lengkapi data berikut dengan teliti dan benar</p>
      </div><button id="back-button" class="btn-secondary text-white px-8 py-4 rounded-xl font-medium mt-6 md:mt-0 flex items-center gap-3">
       <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m0 0v14"></path>
       </svg> Kembali </button>
     </div><!-- Progress Bar -->
     <div class="mb-12">
      <div class="flex items-center justify-between text-base text-gray-600 mb-4"><span class="font-medium">Progress Pengisian</span> <span id="form-progress" class="font-bold">0%</span>
      </div>
      <div class="w-full bg-gray-200 rounded-full h-3">
       <div id="progress-bar" class="bg-gradient-to-r from-blue-600 to-blue-500 h-3 rounded-full transition-all duration-300" style="width: 0%"></div>
      </div>
     </div>
     <form id="submission-form" class="space-y-12"><!-- Service Type -->
      <div class="glass-effect rounded-3xl p-8">
       <h3 class="text-xl font-bold text-gray-800 mb-6 flex items-center gap-3"><span class="w-10 h-10 bg-gradient-to-r from-blue-600 to-blue-500 text-white rounded-full flex items-center justify-center text-base font-bold">1</span> Jenis Layanan</h3>
       <div><label for="jenis-layanan" class="block text-base font-semibold text-gray-700 mb-4">Layanan yang Dipilih</label> <input type="text" id="jenis-layanan" readonly class="form-input w-full px-6 py-5 rounded-xl bg-gradient-to-r from-gray-50 to-gray-100 font-medium text-gray-800 text-lg">
       </div>
      </div><!-- Personal Data -->
      <div class="glass-effect rounded-3xl p-8">
       <h3 class="text-xl font-bold text-gray-800 mb-6 flex items-center gap-3"><span class="w-10 h-10 bg-gradient-to-r from-blue-600 to-blue-500 text-white rounded-full flex items-center justify-center text-base font-bold">2</span> Data Pemohon</h3>
       <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        <div><label for="nama-pemohon" class="block text-base font-semibold text-gray-700 mb-4">Nama Lengkap *</label> <input type="text" id="nama-pemohon" required class="form-input w-full px-6 py-5 rounded-xl text-lg" placeholder="Masukkan nama lengkap">
        </div>
        <div><label for="jenis-kelamin" class="block text-base font-semibold text-gray-700 mb-4">Jenis Kelamin *</label> <select id="jenis-kelamin" required class="form-input w-full px-6 py-5 rounded-xl text-lg"> <option value="">Pilih Jenis Kelamin</option> <option value="Laki-laki">Laki-laki</option> <option value="Perempuan">Perempuan</option> </select>
        </div>
       </div>
       <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mt-8">
        <div><label for="tempat-lahir" class="block text-base font-semibold text-gray-700 mb-4">Tempat Lahir *</label> <input type="text" id="tempat-lahir" required class="form-input w-full px-6 py-5 rounded-xl text-lg" placeholder="Kota/Kabupaten lahir">
        </div>
        <div><label for="tanggal-lahir" class="block text-base font-semibold text-gray-700 mb-4">Tanggal Lahir *</label> <input type="date" id="tanggal-lahir" required class="form-input w-full px-6 py-5 rounded-xl text-lg">
        </div>
       </div>
       <div class="mt-8"><label for="nama-ibu" class="block text-base font-semibold text-gray-700 mb-4">Nama Ibu Kandung *</label> <input type="text" id="nama-ibu" required class="form-input w-full px-6 py-5 rounded-xl text-lg" placeholder="Nama lengkap ibu kandung">
       </div>
      </div><!-- Address Data -->
      <div class="glass-effect rounded-2xl p-6">
       <h3 class="text-lg font-bold text-gray-800 mb-4 flex items-center gap-2"><span class="w-8 h-8 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-full flex items-center justify-center text-sm font-bold">3</span> Data Alamat</h3>
       <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div><label for="kecamatan" class="block text-sm font-semibold text-gray-700 mb-3">Kecamatan *</label> <input type="text" id="kecamatan" required class="form-input w-full px-4 py-4 rounded-xl" placeholder="Nama kecamatan">
        </div>
        <div><label for="desa" class="block text-sm font-semibold text-gray-700 mb-3">Desa/Kelurahan *</label> <input type="text" id="desa" required class="form-input w-full px-4 py-4 rounded-xl" placeholder="Nama desa/kelurahan">
        </div>
       </div>
      </div><!-- Document Upload -->
      <div class="glass-effect rounded-2xl p-6">
       <h3 class="text-lg font-bold text-gray-800 mb-4 flex items-center gap-2"><span class="w-8 h-8 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-full flex items-center justify-center text-sm font-bold">4</span> Berkas Pendukung</h3>
       <div><label for="berkas-pendukung" class="block text-sm font-semibold text-gray-700 mb-3">Upload Dokumen *</label>
        <div class="relative"><input type="file" id="berkas-pendukung" required class="form-input w-full px-4 py-4 rounded-xl file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-purple-50 file:text-purple-700 hover:file:bg-purple-100">
        </div>
        <div class="mt-3 p-3 bg-blue-50 rounded-lg">
         <p class="text-sm text-blue-800 flex items-center gap-2">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
          </svg> Format yang diterima: PDF, JPG, PNG (Maksimal 5MB)</p>
        </div>
       </div>
      </div><!-- Officer Data -->
      <div class="glass-effect rounded-2xl p-6">
       <h3 class="text-lg font-bold text-gray-800 mb-4 flex items-center gap-2"><span class="w-8 h-8 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-full flex items-center justify-center text-sm font-bold">5</span> Data Petugas</h3>
       <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div><label for="nama-petugas" class="block text-sm font-semibold text-gray-700 mb-3">Nama Petugas *</label> <input type="text" id="nama-petugas" required class="form-input w-full px-4 py-4 rounded-xl" placeholder="Nama lengkap petugas">
        </div>
        <div><label for="nik-petugas" class="block text-sm font-semibold text-gray-700 mb-3">NIK Petugas *</label> <input type="text" id="nik-petugas" required pattern="[0-9]{16}" maxlength="16" class="form-input w-full px-4 py-4 rounded-xl" placeholder="16 digit NIK petugas">
        </div>
       </div>
       <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-6">
        <div><label for="email-petugas" class="block text-sm font-semibold text-gray-700 mb-3">Email Petugas *</label> <input type="email" id="email-petugas" required class="form-input w-full px-4 py-4 rounded-xl" placeholder="email@example.com">
        </div>
        <div><label for="no-hp-petugas" class="block text-sm font-semibold text-gray-700 mb-3">No HP Petugas *</label> <input type="tel" id="no-hp-petugas" required class="form-input w-full px-4 py-4 rounded-xl" placeholder="08xxxxxxxxxx">
        </div>
       </div>
       <div class="mt-6"><label for="instansi" class="block text-sm font-semibold text-gray-700 mb-3">Instansi *</label> <input type="text" id="instansi" required class="form-input w-full px-4 py-4 rounded-xl" placeholder="Nama instansi/dinas">
       </div>
      </div><!-- Verification Section -->
      <div class="glass-effect rounded-2xl p-6">
       <h3 class="text-lg font-bold text-gray-800 mb-4 flex items-center gap-2"><span class="w-8 h-8 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-full flex items-center justify-center text-sm font-bold">6</span> Verifikasi &amp; Persetujuan</h3>
       <div class="mb-8">
        <div class="bg-gradient-to-r from-yellow-50 to-orange-50 border border-yellow-200 rounded-xl p-4"><label class="flex items-start cursor-pointer"> <input type="checkbox" id="syarat-ketentuan" required class="mt-1 mr-4 w-5 h-5 text-purple-600 rounded focus:ring-purple-500"> <span class="text-sm text-gray-700 leading-relaxed"> Saya menyetujui <strong class="text-purple-700">Syarat dan Ketentuan</strong> yang berlaku dan menjamin bahwa data yang saya berikan adalah <strong>benar dan dapat dipertanggungjawabkan</strong>. Saya memahami bahwa memberikan data palsu dapat berakibat hukum. </span> </label>
        </div>
       </div>
       <div class="mb-8"><label class="block text-sm font-semibold text-gray-700 mb-4">Tanda Tangan Digital Petugas *</label>
        <div class="bg-white rounded-xl border-2 border-dashed border-purple-300 p-4">
         <canvas id="signature-pad" class="signature-pad w-full h-40 bg-white rounded-lg"></canvas>
         <div class="flex justify-between items-center mt-4">
          <p class="text-sm text-gray-600">Gambar tanda tangan Anda di area di atas</p><button type="button" id="clear-signature" class="btn-secondary text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2">
           <svg class="w-4 h-4" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
           </svg> Hapus </button>
         </div>
        </div>
       </div>
       <div class="mb-8"><label class="block text-sm font-semibold text-gray-700 mb-4">Verifikasi Keamanan *</label>
        <div class="flex flex-col md:flex-row items-start md:items-center gap-4">
         <div class="captcha-box px-8 py-4 rounded-xl text-3xl font-bold select-none" id="captcha-display"></div><button type="button" id="refresh-captcha" class="btn-secondary text-white px-4 py-2 rounded-lg font-medium flex items-center gap-2">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
          </svg> Refresh </button>
        </div><input type="text" id="captcha-input" required placeholder="Masukkan kode keamanan di atas" class="form-input w-full px-4 py-4 rounded-xl mt-4" maxlength="6">
       </div>
      </div><!-- Submit Button -->
      <div class="text-center pt-8"><button type="submit" id="submit-button" class="btn-primary text-white px-12 py-4 rounded-2xl text-lg font-bold shadow-2xl transform transition-all duration-300 hover:scale-105 flex items-center gap-3 mx-auto">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path>
        </svg> Kirim Pengajuan </button>
       <p class="text-sm text-gray-500 mt-4">Pastikan semua data sudah benar sebelum mengirim</p>
      </div>
     </form>
    </div>
   </section><!-- Contact Section -->
   <section id="contact-section" class="mb-32">
    <div class="text-center mb-20">
     <h2 class="text-5xl md:text-6xl font-bold text-gradient mb-6">Hubungi Kami</h2>
     <p class="text-xl text-gray-600 max-w-4xl mx-auto mb-10 leading-relaxed">Butuh bantuan atau informasi lebih lanjut? Tim kami siap membantu Anda</p><button id="contact-button" class="btn-primary text-white px-10 py-5 rounded-2xl font-bold shadow-2xl transform transition-all duration-300 hover:scale-105 flex items-center gap-4 mx-auto text-lg">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path>
      </svg> Hubungi Kami Sekarang </button>
     <div class="section-divider"></div>
    </div>
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-16 max-w-7xl mx-auto"><!-- Contact Information -->
     <div class="glass-effect rounded-3xl shadow-2xl p-10 md:p-12">
      <h3 class="text-3xl md:text-4xl font-bold text-gray-800 mb-10 flex items-center gap-4">
       <div class="w-12 h-12 bg-gradient-to-r from-blue-600 to-blue-500 rounded-full flex items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg>
       </div> Informasi Kontak</h3>
      <div class="space-y-10">
       <div class="flex items-start group">
        <div class="w-14 h-14 bg-gradient-to-r from-blue-500 to-blue-600 rounded-xl flex items-center justify-center mr-6 group-hover:scale-110 transition-transform">
         <svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
         </svg>
        </div>
        <div>
         <p class="font-bold text-gray-800 text-xl mb-2">Alamat Kantor</p>
         <p id="office-address" class="text-gray-600 leading-relaxed text-lg">Jl. Contoh No. 123, Kota</p>
        </div>
       </div>
       <div class="flex items-start group">
        <div class="w-12 h-12 bg-gradient-to-r from-green-500 to-green-600 rounded-xl flex items-center justify-center mr-4 group-hover:scale-110 transition-transform">
         <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path>
         </svg>
        </div>
        <div>
         <p class="font-bold text-gray-800 text-lg mb-1">Telepon</p>
         <p id="office-phone" class="text-gray-600 leading-relaxed">(021) 1234-5678</p>
         <p class="text-sm text-gray-500 mt-1">Senin - Jumat: 08:00 - 16:00 WIT</p>
        </div>
       </div>
       <div class="flex items-start group">
        <div class="w-12 h-12 bg-gradient-to-r from-purple-500 to-purple-600 rounded-xl flex items-center justify-center mr-4 group-hover:scale-110 transition-transform">
         <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
         </svg>
        </div>
        <div>
         <p class="font-bold text-gray-800 text-lg mb-1">Email</p>
         <p id="office-email" class="text-gray-600 leading-relaxed">info@dukcapil.go.id</p>
         <p class="text-sm text-gray-500 mt-1">Respon dalam 24 jam</p>
        </div>
       </div>
      </div><!-- Operating Hours -->
      <div class="mt-10 p-6 bg-gradient-to-r from-blue-50 to-purple-50 rounded-2xl">
       <h4 class="font-bold text-gray-800 mb-4 flex items-center gap-2">
        <svg class="w-5 h-5 text-purple-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg> Jam Operasional</h4>
       <div class="space-y-2 text-sm">
        <div class="flex justify-between"><span class="text-gray-600">Senin - Kamis</span> <span class="font-medium text-gray-800">08:00 - 16:00 WIT</span>
        </div>
        <div class="flex justify-between"><span class="text-gray-600">Jumat</span> <span class="font-medium text-gray-800">08:00 - 11:30 WIT</span>
        </div>
        <div class="flex justify-between"><span class="text-gray-600">Sabtu - Minggu</span> <span class="font-medium text-red-600">Tutup</span>
        </div>
       </div>
      </div>
     </div><!-- Map -->
     <div class="glass-effect rounded-3xl shadow-2xl p-8 md:p-10">
      <h3 class="text-2xl md:text-3xl font-bold text-gray-800 mb-8 flex items-center gap-3">
       <div class="w-10 h-10 bg-gradient-to-r from-purple-600 to-indigo-600 rounded-full flex items-center justify-center">
        <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
        </svg>
       </div> Lokasi Kami</h3>
      <div class="rounded-2xl overflow-hidden shadow-lg mb-6"><iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3951.369563117679!2d131.2955!3d-7.5234!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x2d2755c0292f2a65%3A0x97d389f87f0d32!2sDinas%20Kependudukan%20dan%20Catatan%20Sipil%20Kabupaten%20Tanimbar!5e0!3m2!1sid!2sid!4v1234567890!5m2!1sid!2sid" width="100%" height="350" style="border:0;" allowfullscreen loading="lazy" referrerpolicy="no-referrer-when-downgrade" class="w-full"> </iframe>
      </div>
      <div class="grid grid-cols-2 gap-4"><a href="https://maps.google.com" target="_blank" rel="noopener noreferrer" class="btn-primary text-white px-4 py-3 rounded-xl text-sm font-medium text-center flex items-center justify-center gap-2">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
        </svg> Buka di Maps </a> <button class="btn-secondary text-white px-4 py-3 rounded-xl text-sm font-medium flex items-center justify-center gap-2">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"></path>
        </svg> Bagikan Lokasi </button>
      </div>
     </div>
    </div>
   </section>
  </main><!-- Footer -->
  <footer class="bg-blue-600 text-white py-12 mt-32">
   <div class="container mx-auto px-6">
    <div class="text-center">
     <p class="text-base">¬© 2025 Dinas Kependudukan dan Catatan Sipil Kabupaten Kepulauan Tanimbar. All rights reserved.</p>
    </div>
   </div>
  </footer><!-- Verification Modal -->
  <div id="verification-modal" class="hidden fixed inset-0 z-50 flex items-center justify-center p-4">
   <div class="modal-backdrop absolute inset-0"></div>
   <div class="glass-effect rounded-2xl shadow-2xl max-w-3xl w-full max-h-[90%] overflow-y-auto relative z-10 p-8">
    <h3 class="text-2xl font-bold text-gray-800 mb-6">Verifikasi Data Pengajuan</h3>
    <div id="verification-content" class="space-y-4 mb-6"></div>
    <div class="flex justify-end gap-4"><button id="cancel-submit" class="px-6 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition"> Batal </button> <button id="confirm-submit" class="px-6 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 text-white font-bold rounded-lg hover:from-purple-700 hover:to-indigo-700 transition"> Konfirmasi &amp; Kirim </button>
    </div>
   </div>
  </div><!-- Success Toast -->
  <div id="success-toast" class="hidden fixed top-4 right-4 z-50 glass-effect rounded-lg shadow-xl p-6 max-w-md">
   <div class="flex items-center"><span class="text-3xl mr-4">‚úÖ</span>
    <div>
     <p class="font-bold text-gray-800">Pengajuan Berhasil!</p>
     <p class="text-gray-600">Data Anda telah tersimpan dan akan diproses.</p>
    </div>
   </div>
  </div>
  <script>
        const defaultConfig = {
            site_title: "Layanan Administrasi Kependudukan",
            site_subtitle: "Dinas Kependudukan dan Catatan Sipil",
            office_address: "Jl. Contoh No. 123, Kota",
            office_phone: "(021) 1234-5678",
            office_email: "info@dukcapil.go.id",
            submit_button_text: "Kirim Pengajuan",
            background_color: "#f8f9fa",
            surface_color: "#ffffff",
            text_color: "#1f2937",
            primary_action_color: "#7c3aed",
            secondary_action_color: "#6366f1",
            font_family: "system-ui",
            font_size: 16
        };

        const services = [
            { name: "Kartu Keluarga", icon: "üë®‚Äçüë©‚Äçüëß‚Äçüë¶" },
            { name: "KTP Elektronik", icon: "ü™™" },
            { name: "Kartu Identitas Anak", icon: "üë∂" },
            { name: "SKPWNI", icon: "üìã" },
            { name: "SKDWNI", icon: "üìÑ" },
            { name: "Akta Kelahiran", icon: "üçº" },
            { name: "Akta Kematian", icon: "‚ö∞Ô∏è" },
            { name: "Akta Perkawinan", icon: "üíç" },
            { name: "Akta Perceraian", icon: "üíî" }
        ];

        let currentCaptcha = '';
        let signaturePad = null;
        let isDrawing = false;
        let currentRecordCount = 0;

        function generateCaptcha() {
            const chars = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789';
            let captcha = '';
            for (let i = 0; i < 6; i++) {
                captcha += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            currentCaptcha = captcha;
            document.getElementById('captcha-display').textContent = captcha;
        }

        function initSignaturePad() {
            const canvas = document.getElementById('signature-pad');
            const ctx = canvas.getContext('2d');
            
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;
            
            ctx.strokeStyle = '#000';
            ctx.lineWidth = 2;
            ctx.lineCap = 'round';
            
            let drawing = false;
            let lastX = 0;
            let lastY = 0;
            
            canvas.addEventListener('mousedown', (e) => {
                drawing = true;
                const rect = canvas.getBoundingClientRect();
                lastX = e.clientX - rect.left;
                lastY = e.clientY - rect.top;
            });
            
            canvas.addEventListener('mousemove', (e) => {
                if (!drawing) return;
                const rect = canvas.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                
                ctx.beginPath();
                ctx.moveTo(lastX, lastY);
                ctx.lineTo(x, y);
                ctx.stroke();
                
                lastX = x;
                lastY = y;
                isDrawing = true;
            });
            
            canvas.addEventListener('mouseup', () => {
                drawing = false;
            });
            
            canvas.addEventListener('mouseleave', () => {
                drawing = false;
            });
            
            canvas.addEventListener('touchstart', (e) => {
                e.preventDefault();
                drawing = true;
                const rect = canvas.getBoundingClientRect();
                const touch = e.touches[0];
                lastX = touch.clientX - rect.left;
                lastY = touch.clientY - rect.top;
            });
            
            canvas.addEventListener('touchmove', (e) => {
                e.preventDefault();
                if (!drawing) return;
                const rect = canvas.getBoundingClientRect();
                const touch = e.touches[0];
                const x = touch.clientX - rect.left;
                const y = touch.clientY - rect.top;
                
                ctx.beginPath();
                ctx.moveTo(lastX, lastY);
                ctx.lineTo(x, y);
                ctx.stroke();
                
                lastX = x;
                lastY = y;
                isDrawing = true;
            });
            
            canvas.addEventListener('touchend', () => {
                drawing = false;
            });
            
            signaturePad = { canvas, ctx };
        }

        function clearSignature() {
            const canvas = signaturePad.canvas;
            const ctx = signaturePad.ctx;
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            isDrawing = false;
        }

        function renderServices() {
            const container = document.querySelector('#services-section .grid');
            container.innerHTML = '';
            
            services.forEach((service, index) => {
                const card = document.createElement('div');
                card.className = 'service-card glass-effect rounded-3xl shadow-xl p-10 text-center cursor-pointer transform transition-all duration-500';
                card.style.animationDelay = `${index * 0.1}s`;
                card.innerHTML = `
                    <div class="text-8xl mb-8 transform transition-transform duration-300 hover:scale-110">${service.icon}</div>
                    <h3 class="text-2xl font-bold text-gray-800 mb-4">${service.name}</h3>
                    <div class="w-16 h-1 bg-gradient-to-r from-blue-600 to-blue-500 rounded-full mx-auto mb-6"></div>
                    <p class="text-base text-gray-600 mb-8 leading-relaxed">Klik untuk mengajukan layanan ini</p>
                    <div class="flex items-center justify-center text-blue-600 font-semibold text-base">
                        <span>Mulai Pengajuan</span>
                        <svg class="w-5 h-5 ml-3 transform transition-transform group-hover:translate-x-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                        </svg>
                    </div>
                `;
                card.addEventListener('click', () => showForm(service.name));
                container.appendChild(card);
                
                // Add fade-in animation
                setTimeout(() => {
                    card.classList.add('fade-in');
                }, index * 100);
            });
        }

        function updateFormProgress() {
            const form = document.getElementById('submission-form');
            const inputs = form.querySelectorAll('input[required], select[required], textarea[required]');
            const checkbox = document.getElementById('syarat-ketentuan');
            
            let filledInputs = 0;
            inputs.forEach(input => {
                if (input.type === 'file') {
                    if (input.files && input.files.length > 0) filledInputs++;
                } else if (input.value.trim() !== '') {
                    filledInputs++;
                }
            });
            
            if (checkbox && checkbox.checked) filledInputs++;
            if (isDrawing) filledInputs++;
            
            const totalInputs = inputs.length + 2; // +2 for checkbox and signature
            const progress = Math.round((filledInputs / totalInputs) * 100);
            
            document.getElementById('form-progress').textContent = `${progress}%`;
            document.getElementById('progress-bar').style.width = `${progress}%`;
        }

        function showForm(serviceName) {
            document.getElementById('services-section').classList.add('hidden');
            document.getElementById('form-section').classList.remove('hidden');
            document.getElementById('contact-section').classList.add('hidden');
            document.getElementById('jenis-layanan').value = serviceName;
            document.getElementById('submission-form').reset();
            document.getElementById('jenis-layanan').value = serviceName;
            clearSignature();
            generateCaptcha();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function showServices() {
            document.getElementById('services-section').classList.remove('hidden');
            document.getElementById('form-section').classList.add('hidden');
            document.getElementById('contact-section').classList.remove('hidden');
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function showVerificationModal(formData) {
            const modal = document.getElementById('verification-modal');
            const content = document.getElementById('verification-content');
            
            content.innerHTML = `
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div><strong>Jenis Layanan:</strong> ${formData.jenis_layanan}</div>
                    <div><strong>Nama Pemohon:</strong> ${formData.nama_pemohon}</div>
                    <div><strong>Jenis Kelamin:</strong> ${formData.jenis_kelamin}</div>
                    <div><strong>Tempat Lahir:</strong> ${formData.tempat_lahir}</div>
                    <div><strong>Tanggal Lahir:</strong> ${formData.tanggal_lahir}</div>
                    <div><strong>Nama Ibu:</strong> ${formData.nama_ibu}</div>
                    <div><strong>Kecamatan:</strong> ${formData.kecamatan}</div>
                    <div><strong>Desa:</strong> ${formData.desa}</div>
                    <div><strong>Berkas:</strong> ${formData.berkas_pendukung}</div>
                    <div><strong>Nama Petugas:</strong> ${formData.nama_petugas}</div>
                    <div><strong>NIK Petugas:</strong> ${formData.nik_petugas}</div>
                    <div><strong>Email Petugas:</strong> ${formData.email_petugas}</div>
                    <div><strong>No HP Petugas:</strong> ${formData.no_hp_petugas}</div>
                    <div><strong>Instansi:</strong> ${formData.instansi}</div>
                </div>
                <div class="mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg">
                    <p class="text-sm text-yellow-800">‚ö†Ô∏è Pastikan semua data sudah benar sebelum mengirim pengajuan.</p>
                </div>
            `;
            
            modal.classList.remove('hidden');
        }

        function hideVerificationModal() {
            document.getElementById('verification-modal').classList.add('hidden');
        }

        function showSuccessToast() {
            const toast = document.getElementById('success-toast');
            toast.classList.remove('hidden');
            setTimeout(() => {
                toast.classList.add('hidden');
            }, 5000);
        }

        async function handleFormSubmit(e) {
            e.preventDefault();
            
            if (currentRecordCount >= 999) {
                const toast = document.getElementById('success-toast');
                toast.innerHTML = `
                    <div class="flex items-center">
                        <span class="text-3xl mr-4">‚ö†Ô∏è</span>
                        <div>
                            <p class="font-bold text-gray-800">Batas Maksimum Tercapai</p>
                            <p class="text-gray-600">Maksimum 999 pengajuan telah tercapai. Silakan hubungi admin.</p>
                        </div>
                    </div>
                `;
                toast.classList.remove('hidden');
                setTimeout(() => toast.classList.add('hidden'), 5000);
                return;
            }
            
            if (!isDrawing) {
                const toast = document.getElementById('success-toast');
                toast.innerHTML = `
                    <div class="flex items-center">
                        <span class="text-3xl mr-4">‚ö†Ô∏è</span>
                        <div>
                            <p class="font-bold text-gray-800">Tanda Tangan Diperlukan</p>
                            <p class="text-gray-600">Silakan buat tanda tangan pada kolom yang tersedia.</p>
                        </div>
                    </div>
                `;
                toast.classList.remove('hidden');
                setTimeout(() => toast.classList.add('hidden'), 3000);
                return;
            }
            
            const captchaInput = document.getElementById('captcha-input').value.toUpperCase();
            if (captchaInput !== currentCaptcha) {
                const toast = document.getElementById('success-toast');
                toast.innerHTML = `
                    <div class="flex items-center">
                        <span class="text-3xl mr-4">‚ùå</span>
                        <div>
                            <p class="font-bold text-gray-800">Captcha Salah</p>
                            <p class="text-gray-600">Kode captcha yang Anda masukkan tidak sesuai.</p>
                        </div>
                    </div>
                `;
                toast.classList.remove('hidden');
                setTimeout(() => toast.classList.add('hidden'), 3000);
                generateCaptcha();
                document.getElementById('captcha-input').value = '';
                return;
            }
            
            const fileInput = document.getElementById('berkas-pendukung');
            const fileName = fileInput.files[0] ? fileInput.files[0].name : 'Tidak ada file';
            
            const formData = {
                jenis_layanan: document.getElementById('jenis-layanan').value,
                nama_pemohon: document.getElementById('nama-pemohon').value,
                jenis_kelamin: document.getElementById('jenis-kelamin').value,
                tempat_lahir: document.getElementById('tempat-lahir').value,
                tanggal_lahir: document.getElementById('tanggal-lahir').value,
                nama_ibu: document.getElementById('nama-ibu').value,
                kecamatan: document.getElementById('kecamatan').value,
                desa: document.getElementById('desa').value,
                berkas_pendukung: fileName,
                nama_petugas: document.getElementById('nama-petugas').value,
                nik_petugas: document.getElementById('nik-petugas').value,
                email_petugas: document.getElementById('email-petugas').value,
                no_hp_petugas: document.getElementById('no-hp-petugas').value,
                instansi: document.getElementById('instansi').value
            };
            
            showVerificationModal(formData);
        }

        async function confirmSubmit() {
            const submitButton = document.getElementById('confirm-submit');
            submitButton.disabled = true;
            submitButton.textContent = 'Mengirim...';
            
            const canvas = signaturePad.canvas;
            const signatureData = canvas.toDataURL();
            
            const formData = {
                id: Date.now().toString(),
                jenis_layanan: document.getElementById('jenis-layanan').value,
                nama_pemohon: document.getElementById('nama-pemohon').value,
                jenis_kelamin: document.getElementById('jenis-kelamin').value,
                tempat_lahir: document.getElementById('tempat-lahir').value,
                tanggal_lahir: document.getElementById('tanggal-lahir').value,
                nama_ibu: document.getElementById('nama-ibu').value,
                kecamatan: document.getElementById('kecamatan').value,
                desa: document.getElementById('desa').value,
                berkas_pendukung: document.getElementById('berkas-pendukung').files[0]?.name || 'Tidak ada file',
                nama_petugas: document.getElementById('nama-petugas').value,
                nik_petugas: document.getElementById('nik-petugas').value,
                email_petugas: document.getElementById('email-petugas').value,
                no_hp_petugas: document.getElementById('no-hp-petugas').value,
                instansi: document.getElementById('instansi').value,
                tanda_tangan: signatureData,
                captcha_answer: document.getElementById('captcha-input').value,
                created_at: new Date().toISOString()
            };
            
            const result = await window.dataSdk.create(formData);
            
            submitButton.disabled = false;
            submitButton.textContent = 'Konfirmasi & Kirim';
            
            if (result.isOk) {
                hideVerificationModal();
                showSuccessToast();
                showServices();
            } else {
                const toast = document.getElementById('success-toast');
                toast.innerHTML = `
                    <div class="flex items-center">
                        <span class="text-3xl mr-4">‚ùå</span>
                        <div>
                            <p class="font-bold text-gray-800">Gagal Mengirim</p>
                            <p class="text-gray-600">Terjadi kesalahan. Silakan coba lagi.</p>
                        </div>
                    </div>
                `;
                toast.classList.remove('hidden');
                setTimeout(() => toast.classList.add('hidden'), 3000);
            }
        }

        const dataHandler = {
            onDataChanged(data) {
                currentRecordCount = data.length;
                // Update stats counter in header
                const processedCountElement = document.getElementById('processed-count');
                if (processedCountElement) {
                    processedCountElement.textContent = data.length;
                }
            }
        };

        async function onConfigChange(config) {
            const customFont = config.font_family || defaultConfig.font_family;
            const baseFontStack = 'system-ui, -apple-system, sans-serif';
            const baseSize = config.font_size || defaultConfig.font_size;
            
            document.getElementById('site-title').textContent = config.site_title || defaultConfig.site_title;
            document.getElementById('site-subtitle').textContent = config.site_subtitle || defaultConfig.site_subtitle;
            document.getElementById('office-address').textContent = config.office_address || defaultConfig.office_address;
            document.getElementById('office-phone').textContent = config.office_phone || defaultConfig.office_phone;
            document.getElementById('office-email').textContent = config.office_email || defaultConfig.office_email;
            document.getElementById('submit-button').textContent = config.submit_button_text || defaultConfig.submit_button_text;
            
            document.body.style.backgroundColor = config.background_color || defaultConfig.background_color;
            document.body.style.fontFamily = `${customFont}, ${baseFontStack}`;
            
            const glassElements = document.querySelectorAll('.glass-effect');
            glassElements.forEach(el => {
                el.style.backgroundColor = config.surface_color || defaultConfig.surface_color;
            });
            
            const textElements = document.querySelectorAll('h1, h2, h3, p, label, input, select, textarea, button');
            textElements.forEach(el => {
                el.style.color = config.text_color || defaultConfig.text_color;
            });
            
            document.getElementById('site-title').style.fontSize = `${baseSize * 2}px`;
            document.getElementById('site-subtitle').style.fontSize = `${baseSize * 1.25}px`;
            
            const headings = document.querySelectorAll('h2');
            headings.forEach(h => h.style.fontSize = `${baseSize * 1.875}px`);
            
            const h3Elements = document.querySelectorAll('h3');
            h3Elements.forEach(h => h.style.fontSize = `${baseSize * 1.5}px`);
            
            const primaryButtons = document.querySelectorAll('#submit-button, #confirm-submit, #contact-button');
            primaryButtons.forEach(btn => {
                btn.style.background = `linear-gradient(135deg, ${config.primary_action_color || defaultConfig.primary_action_color}, ${config.secondary_action_color || defaultConfig.secondary_action_color})`;
            });
            
            const secondaryButtons = document.querySelectorAll('#back-button, #cancel-submit, #clear-signature, #refresh-captcha');
            secondaryButtons.forEach(btn => {
                btn.style.backgroundColor = config.secondary_action_color || defaultConfig.secondary_action_color;
            });
        }

        document.addEventListener('DOMContentLoaded', async () => {
            renderServices();
            initSignaturePad();
            generateCaptcha();
            
            document.getElementById('back-button').addEventListener('click', showServices);
            document.getElementById('submission-form').addEventListener('submit', handleFormSubmit);
            document.getElementById('clear-signature').addEventListener('click', clearSignature);
            document.getElementById('refresh-captcha').addEventListener('click', generateCaptcha);
            document.getElementById('cancel-submit').addEventListener('click', hideVerificationModal);
            document.getElementById('confirm-submit').addEventListener('click', confirmSubmit);
            
            document.getElementById('contact-button').addEventListener('click', () => {
                document.getElementById('contact-section').scrollIntoView({ behavior: 'smooth' });
            });
            
            // Add form progress tracking
            const formInputs = document.querySelectorAll('#submission-form input, #submission-form select, #submission-form textarea');
            formInputs.forEach(input => {
                input.addEventListener('input', updateFormProgress);
                input.addEventListener('change', updateFormProgress);
            });
            
            document.getElementById('syarat-ketentuan').addEventListener('change', updateFormProgress);
            
            const initResult = await window.dataSdk.init(dataHandler);
            if (!initResult.isOk) {
                console.error('Failed to initialize Data SDK');
            }
            
            if (window.elementSdk) {
                window.elementSdk.init({
                    defaultConfig,
                    onConfigChange,
                    mapToCapabilities: (config) => ({
                        recolorables: [
                            {
                                get: () => config.background_color || defaultConfig.background_color,
                                set: (value) => {
                                    config.background_color = value;
                                    window.elementSdk.setConfig({ background_color: value });
                                }
                            },
                            {
                                get: () => config.surface_color || defaultConfig.surface_color,
                                set: (value) => {
                                    config.surface_color = value;
                                    window.elementSdk.setConfig({ surface_color: value });
                                }
                            },
                            {
                                get: () => config.text_color || defaultConfig.text_color,
                                set: (value) => {
                                    config.text_color = value;
                                    window.elementSdk.setConfig({ text_color: value });
                                }
                            },
                            {
                                get: () => config.primary_action_color || defaultConfig.primary_action_color,
                                set: (value) => {
                                    config.primary_action_color = value;
                                    window.elementSdk.setConfig({ primary_action_color: value });
                                }
                            },
                            {
                                get: () => config.secondary_action_color || defaultConfig.secondary_action_color,
                                set: (value) => {
                                    config.secondary_action_color = value;
                                    window.elementSdk.setConfig({ secondary_action_color: value });
                                }
                            }
                        ],
                        borderables: [],
                        fontEditable: {
                            get: () => config.font_family || defaultConfig.font_family,
                            set: (value) => {
                                config.font_family = value;
                                window.elementSdk.setConfig({ font_family: value });
                            }
                        },
                        fontSizeable: {
                            get: () => config.font_size || defaultConfig.font_size,
                            set: (value) => {
                                config.font_size = value;
                                window.elementSdk.setConfig({ font_size: value });
                            }
                        }
                    }),
                    mapToEditPanelValues: (config) => new Map([
                        ["site_title", config.site_title || defaultConfig.site_title],
                        ["site_subtitle", config.site_subtitle || defaultConfig.site_subtitle],
                        ["office_address", config.office_address || defaultConfig.office_address],
                        ["office_phone", config.office_phone || defaultConfig.office_phone],
                        ["office_email", config.office_email || defaultConfig.office_email],
                        ["submit_button_text", config.submit_button_text || defaultConfig.submit_button_text]
                    ])
                });
            }
        });
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9978450a15cf281e',t:'MTc2MTk2NzM2Ny4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
